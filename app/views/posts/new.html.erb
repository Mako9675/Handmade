<div class='container'>
  <div class='row'>
    
    <div class="mx-auto col-sm-12 col-md-9 col-lg-9 px-5 px-sm-0">
      <h1>投稿フォーム</h1>
      <%= form_with model: @post, local: true do |f| %>
      
      <div class="field">
        <%= f.label :title,'タイトル' %><br />
        <%= f.text_field :title, autofocus: true, autocomplete: "title", class: 'form-control' %>
        <% if @post.errors.include?(:title) %>
          <p style="color: red;"><%= @post.errors.full_messages_for(:title).first %>
        <% end %>
      </div>
      
      <div class="parent">
        <div class="form-box">
          <div class="forms-item">
            材料
          </div>
            <%= f.fields_for :post_materials do |form| %>
              <%= render "post_materials_fields", :f => form, :material => form.object %>
            <% end %>
            <!-- １）追加ボタンの記述 -->
            <div class="add-botton-box">
              <%= link_to_add_association "+フォームを追加する", f, :post_materials, partial: "post_materials_fields", render_options: {locals: { material: @material }} %>
            </div>
        </div>
        
        <div id="detail-association-insertion-point"></div>
      </div>
      
      <div class="parent">
        <div class="form-box">
          <div class="forms-item">
            作り方
          </div>
            <%= f.fields_for :post_makes do |form| %>
              <%= render "post_body_fields", :f => form, :body => form.object %>
            <% end %>
            <!-- １）追加ボタンの記述 -->
            <div class="add-botton-box">
              <%= link_to_add_association "+フォームを追加する", f, :post_makes, partial: "post_body_fields", render_options: {locals: { body: @body }} %>
            </div>
        </div>
        
        <div id="detail-association-insertion-point"></div>
      </div>
      
      <div class="field">
        <%= f.label :genre_id,'ジャンル' %><br />
        <%= f.collection_select :genre_id, Genre.all, :id, :name, { prompt: '選択してください' }, class: 'form-control' %>
      </div>
      
      <div class="actions">
        <div class="form-group">
          <%= f.select :status, Post.statuses.keys.map { |k| [t("enums.post.status.#{k}"),k]}, {}, {class: "custom-select w-25"} %>
        </div>
        <%= f.submit '投稿する', class: "btn btn-success" %>
      </div>
      
      <% end %>
        
    </div>
  </div>
</div>
